function [] = DisconnectFromVRep()
global clientID;
global vrep;
global polling_timer;
global simulink_model;

    stop(polling_timer);
    delete(polling_timer);
    set_param(simulink_model,'SimulationCommand', 'stop');
    set_param(simulink_model,'FixedStep', '0.01');

    vrep.simxSetFloatSignal(clientID,'vLeft', 0, vrep.simx_opmode_oneshot);
    vrep.simxSetFloatSignal(clientID,'vRight', 0, vrep.simx_opmode_oneshot);
    vrep.simxSetFloatSignal(clientID,'pPan', 0, vrep.simx_opmode_oneshot);
    vrep.simxSetFloatSignal(clientID,'pTilt', 0, vrep.simx_opmode_oneshot);
    vrep.simxSetFloatSignal(clientID,'vPan', 0, vrep.simx_opmode_oneshot);
    vrep.simxSetFloatSignal(clientID,'vTilt', 0, vrep.simx_opmode_oneshot);
    vrep.simxStopSimulation(clientID, vrep.simx_opmode_oneshot);
    
    % Before closing the connection to V-REP, make sure that the last command sent out had time to arrive. You can guarantee this with (for example):
    vrep.simxGetPingTime(clientID);

    % Now close the connection to V-REP:	
    vrep.simxFinish(clientID);
    vrep.delete(); % call the destructor!

    disp('Program ended');
end